@model StoreSearchVM

@{
	int pageNumber = ViewBag.PageNumber;
	int totalPages = ViewBag.TotalPages;
}

<h2 class="pb-4 text-center form-title">Products</h2>

<form class="row g-3 mb-3">
	<div class="col-lg-2 col-md-4">
		<select class="form-select" name="brand" asp-for="Brand" onchange="this.form.submit()">
			<option value="">All Brands</option>
			<option value="Apple">Apple</option>
			<option value="Samsung">Samsaung</option>
			<option value="Nokia">Nokia</option>
			<option value="HP">HP</option>
			<option value="DELL">DELL</option>
		</select>
	</div>
	<div class="col-lg-2 col-md-4">
		<select class="form-select" name="category" asp-for="Category" onchange="this.form.submit()">
			<option value="">All Categories</option>
			<option value="Phones">Phones</option>
			<option value="Computers">Computers</option>
			<option value="Accessories">Accessories</option>
			<option value="Printers">Printers</option>
			<option value="Cameras">Cameras</option>
			<option value="Other">Other</option>
		</select>
	</div>
	<div class="col-lg-2 col-md-4">
		<select class="form-select" name="sort" asp-for="Sort" onchange="this.form.submit()">
			<option value="newest">Order By Newest</option>
			<option value="price_asc">Price: Low to High</option>
			<option value="price_desc">Price: High to Low</option>
		</select>
	</div>
	<div class="col-lg-6 col d-flex">
		<input class="form-control me-2" name="search" asp-for="Search" placeholder="search by name" aria-label="Search" />
		<button class="btn btn-outline-success" type="submit">Search</button>
	</div>
</form>


<div class="row mb-5 g-3">
	@foreach (var product in ViewBag.Products)
	{
		<div class="col-lg-3 col-md-6">
			<div class="rounded border shadow p-3 text-center h-100 product-card">
				<img src="~/images/products/@product.ImageUrl" class="img-fluid"
					 style="height: 180px; object-fit: contain" />
				<hr />
				<h5 class="py-2">@product.Name</h5>
				<p>
					Brand: @product.Brand.Name, Category: @product.Category.Name
				</p>
				<h4 class="mb-3">@product.Price.ToString("C")</h4>
				<a class="btn btn-primary mb-2" asp-controller="Store" asp-action="Details"
				   asp-route-id="@product.Id" role="button">Details</a>
				<button type="button" class="btn btn-success mb-2">
					Add to Cart <i class="bi bi-cart4"></i>
				</button>
			</div>
		</div>
	}
</div>



<nav>
	<ul class="pagination justify-content-center">

		<!-- Previous -->
		<li class="page-item @(pageNumber <= 1 ? "d-none" : "")">
			<a class="page-link"
			   href="@(pageNumber > 1 ?
							Url.Action("Index", new { pageNumber = pageNumber - 1, search = Model.Search, brand = Model.Brand, category = Model.Category, sort = Model.Sort })
						  	  : "#")"
			   aria-label="Previous">
				<span aria-hidden="true">&laquo;</span>
			</a>
		</li>

		<!-- Page Numbers -->
		@for (int i = 1; i <= totalPages; i++)
		{
			<li class="page-item @(i == pageNumber ? "active" : "")">
				<a class="page-link"
				   href="@Url.Action("Index", new { pageNumber = i, search = Model.Search , brand = Model.Brand , category = Model.Category , sort = Model.Sort })">
					@i
				</a>
			</li>
		}

		<!-- Next -->
		<li class="page-item @(pageNumber >= totalPages ? "d-none" : "")">
			<a class="page-link"
			   href="@(pageNumber < totalPages ?
						  	  Url.Action("Index", new { pageNumber = pageNumber + 1, search = Model.Search , brand = Model.Brand , category = Model.Category , sort = Model.Sort })
                      	  	  : "#")"
			   aria-label="Next">
				<span aria-hidden="true">&raquo;</span>
			</a>
		</li>

	</ul>
</nav>


<style>
	.product-card:hover {
		transform: scale(1.03);
		transition: transform 0.3s;
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
	}
</style>